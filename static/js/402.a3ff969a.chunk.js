"use strict";(self.webpackChunkcrm_dashboard=self.webpackChunkcrm_dashboard||[]).push([[402],{86402:(e,n,i)=>{i.r(n),i.d(n,{default:()=>W});var s=i(89379),t=i(65043),a=i(94496),l=i(39336),d=i(68903),r=i(7353),c=i(11906),o=i(15795),h=i(17392),x=i(53193),m=i(18356),j=i(72221),A=i(91449),u=i(12110),g=i(26494),p=i(90035),y=i(26600),v=i(35316),S=i(74605),f=i(51962),b=i(29347),C=i(66580),w=i(58997),F=i(91614),k=i(30513),P=i(70579);const N=[{id:1,name:"John Smith",school:"ABC School",standard:"1st",division:"A",guardianName:"Mike Smith",guardianEmail:"mike@example.com",totalFees:5e3,pendingFees:3e3},{id:2,name:"Jane Smith",school:"ABC School",standard:"3rd",division:"B",guardianName:"Mike Smith",guardianEmail:"mike@example.com",totalFees:5500,pendingFees:4e3}],D=t.forwardRef(((e,n)=>{let{paymentData:i}=e;return(0,P.jsxs)("div",{ref:n,style:{padding:"40px",fontFamily:"Arial, sans-serif"},children:[(0,P.jsx)(a.A,{variant:"h4",align:"center",fontWeight:"bold",gutterBottom:!0,children:"Fee Payment Receipt"}),(0,P.jsx)(l.A,{sx:{my:1}}),(0,P.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,P.jsx)(d.Ay,{item:!0,xs:6,children:(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Receipt No:"})," ",i.receiptNo]})}),(0,P.jsx)(d.Ay,{item:!0,xs:6,align:"right",children:(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Date:"})," ",i.date]})}),(0,P.jsx)(d.Ay,{item:!0,xs:12,children:(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Guardian Name:"})," ",i.guardianName]})}),(0,P.jsx)(d.Ay,{item:!0,xs:12,children:(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"School:"})," ",i.school]})}),(0,P.jsxs)(d.Ay,{item:!0,xs:12,children:[(0,P.jsx)(a.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Payment Details"}),i.students.map((e=>(0,P.jsxs)(r.A,{sx:{mb:2},children:[(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Student Name:"})," ",e.name]}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Class:"})," ",e.standard," - ",e.division]}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Amount Paid:"})," \u20b9",e.amountPaid]}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Remaining Fees:"})," \u20b9",e.remainingFees]}),(0,P.jsx)(l.A,{sx:{my:1}})]},e.id)))]}),(0,P.jsx)(d.Ay,{item:!0,xs:12,children:(0,P.jsxs)(a.A,{textAlign:"right",children:[(0,P.jsx)("strong",{children:"Total Amount Paid:"})," \u20b9",i.totalAmount]})})]}),(0,P.jsx)(r.A,{sx:{mt:4,textAlign:"center"},children:(0,P.jsx)(a.A,{sx:{color:"#666",fontWeight:"bold"},children:"\ud83e\udd17 Thank you for your payment \ud83e\udd17"})})]})})),W=()=>{const e=(0,C.Zp)(),n=(0,t.useRef)(),[i,l]=(0,t.useState)(""),[W,B]=(0,t.useState)(""),[R,z]=(0,t.useState)(""),[E,T]=(0,t.useState)(""),[G,I]=(0,t.useState)(!1),[J,L]=(0,t.useState)([]),[M,O]=(0,t.useState)(null),[Y,Z]=(0,t.useState)(!1);return(0,P.jsxs)("div",{children:[(0,P.jsx)(c.A,{variant:"outlined",size:"small",sx:{mb:1},onClick:()=>e(-1),children:"Back"}),(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,P.jsx)(a.A,{variant:"h6",fontWeight:"bold",children:"Guardians Payments"}),(0,P.jsxs)(r.A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,P.jsx)(o.A,{sx:{width:200},label:"Search by name / email",size:"small",variant:"outlined",value:E,onChange:e=>T(e.target.value)}),(0,P.jsx)(h.A,{sx:{backgroundColor:"white",color:"black"},children:(0,P.jsx)(w.A,{fontSize:"medium",titleAccess:"Sort List"})})]})]}),(0,P.jsxs)(d.Ay,{container:!0,spacing:1,sx:{mb:2,mt:1},children:[(0,P.jsx)(d.Ay,{item:!0,xs:12,sm:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,size:"small",children:[(0,P.jsx)(m.A,{children:"School"}),(0,P.jsxs)(j.A,{value:i,label:"School",onChange:e=>{l(e.target.value),B(""),z("")},children:[(0,P.jsx)(A.A,{value:"",disabled:!0,children:"Select School"}),[{id:1,name:"ABC School"},{id:2,name:"XYZ School"}].map((e=>(0,P.jsx)(A.A,{value:e.name,children:e.name},e.id)))]})]})}),(0,P.jsx)(d.Ay,{item:!0,xs:6,sm:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,size:"small",children:[(0,P.jsx)(m.A,{children:"Standard"}),(0,P.jsxs)(j.A,{value:W,label:"Standard",onChange:e=>{B(e.target.value),z("")},disabled:!i,children:[(0,P.jsx)(A.A,{value:"",disabled:!0,children:"Select Standard"}),["1st","2nd","3rd"].map((e=>(0,P.jsx)(A.A,{value:e,children:e},e)))]})]})}),(0,P.jsx)(d.Ay,{item:!0,xs:6,sm:4,children:(0,P.jsxs)(x.A,{fullWidth:!0,size:"small",children:[(0,P.jsx)(m.A,{children:"Division"}),(0,P.jsxs)(j.A,{value:R,label:"Division",onChange:e=>z(e.target.value),disabled:!W,children:[(0,P.jsx)(A.A,{value:"",disabled:!0,children:"Select Division"}),["A","B","C"].map((e=>(0,P.jsx)(A.A,{value:e,children:e},e)))]})]})})]}),Array.from(new Set(N.map((e=>e.guardianEmail)))).map((e=>{const n=(e=>N.filter((n=>n.guardianEmail===e&&(!i||n.school===i)&&(!W||n.standard===W)&&(!R||n.division===R))))(e);return 0===n.length?null:(0,P.jsx)(u.A,{sx:{mb:2},children:(0,P.jsxs)(g.A,{children:[(0,P.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,P.jsxs)(a.A,{variant:"h6",children:[(0,P.jsx)("strong",{children:"Guardian Name : "}),n[0].guardianName]}),(0,P.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>{L(n),I(!0)},children:"Pay Fees"})]}),(0,P.jsx)(d.Ay,{container:!0,spacing:2,children:n.map((e=>(0,P.jsx)(d.Ay,{item:!0,xs:12,sm:6,children:(0,P.jsx)(u.A,{variant:"outlined",children:(0,P.jsxs)(g.A,{children:[(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Student:"})," ",e.name]}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Class:"})," ",e.standard," -"," ",e.division]}),(0,P.jsxs)(a.A,{children:[(0,P.jsx)("strong",{children:"Pending Fees:"})," \u20b9",e.pendingFees]})]})})},e.id)))})]})},e)})),(0,P.jsxs)(p.A,{open:G,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0,children:[(0,P.jsx)(y.A,{children:"Fee Payment"}),(0,P.jsxs)(v.A,{children:[(0,P.jsxs)(r.A,{sx:{mb:2},children:[(0,P.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Select Students for Payment"}),J.map((e=>(0,P.jsx)(S.A,{control:(0,P.jsx)(f.A,{checked:J.some((n=>n.id===e.id)),onChange:()=>(e=>{const n=J.find((n=>n.id===e.id));L(n?J.filter((n=>n.id!==e.id)):[...J,e])})(e)}),label:"".concat(e.name," - \u20b9").concat(e.pendingFees)},e.id)))]}),(0,P.jsxs)(r.A,{sx:{mt:3,textAlign:"center"},children:[(0,P.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Scan QR Code to Pay"}),(0,P.jsx)(F.h,{value:(()=>{const e=J.reduce(((e,n)=>e+n.pendingFees),0);return JSON.stringify({amount:e,students:J.map((e=>({id:e.id,name:e.name,amount:e.pendingFees})))})})(),size:256}),(0,P.jsxs)(a.A,{sx:{mt:2},children:["Total Amount: \u20b9",J.reduce(((e,n)=>e+n.pendingFees),0)]})]})]}),(0,P.jsxs)(b.A,{children:[(0,P.jsx)(c.A,{onClick:()=>I(!1),children:"Cancel"}),(0,P.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>{const e={receiptNo:"RCP".concat(Date.now()),date:(new Date).toLocaleDateString(),guardianName:J[0].guardianName,school:J[0].school,totalAmount:J.reduce(((e,n)=>e+n.pendingFees),0),students:J.map((e=>(0,s.A)((0,s.A)({},e),{},{amountPaid:e.pendingFees,remainingFees:0})))};O(e),I(!1),Z(!0)},children:"Complete Payment"})]})]}),(0,P.jsxs)(p.A,{open:Y,onClose:()=>Z(!1),maxWidth:"md",fullWidth:!0,children:[(0,P.jsx)(y.A,{children:"Payment Receipt"}),(0,P.jsx)(v.A,{children:M&&(0,P.jsx)(D,{ref:n,paymentData:M})}),(0,P.jsxs)(b.A,{children:[(0,P.jsx)(c.A,{onClick:()=>Z(!1),children:"Close"}),(0,P.jsx)(c.A,{variant:"contained",onClick:()=>{const e=window.open("","","width=800,height=600"),i=n.current.innerHTML;e.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Fee Payment Receipt</title>\n          <style>\n            @media print {\n              body { padding: 40px; }\n              .receipt-container { max-width: 800px; margin: 0 auto; }\n              @page { size: A4; margin: 20mm; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="receipt-container">'.concat(i,"</div>\n          <script>\n            window.onload = () => {\n              window.print();\n              window.onafterprint = () => window.close();\n            }\n          <\/script>\n        </body>\n      </html>\n    ")),e.document.close()},startIcon:(0,P.jsx)(k.A,{}),children:"Print"})]})]})]})}}}]);
//# sourceMappingURL=402.a3ff969a.chunk.js.map